{% extends 'base.html' %} 
{% load static %} 
{% block title %}
    Payment Gateway
{% endblock title %} 
{% block css %}
    <link rel="stylesheet" href="{% static 'payment/css/gateway.css' %}">
{% endblock css %} 
{% block body %}
    <div class="prod_sec_header">
        <div class="head_top"></div>
        <div class="header">Customert Details, Order Summery and Payment Getway</div>
        <div class="head_bottom"></div>
    </div>
    <div class="container mt-5">
        <img class="edit" src="/assets/img/edit.svg" alt="">
        <div class="main">1. LOGIN <img class="check" src="/assets/img/check.svg" alt=""></div>
        <div class="details pb-5">
            <div><span class="ans ms-3">{{user.get_full_name}}</span><span class="ms-3">{{user.email}}</span></div>
        </div>
    </div>
    <div class="container mt-5">
        <img class="edit" src="/assets/img/edit.svg" alt="">
        <div class="main">2. DELIVERY  ADDRESS <img class="check" src="/assets/img/check.svg" alt=""></div>
        <div class="details pb-5">
            <div class="addr_all" id="addr_{{address.id}}">
                <div class="row">
                    <div class="col-12">
                        <label for="inputFname" class="form-label">Full Name</label>
                        <input disabled type="text" class="form-control" value="{{address.fname}}" id="inputFname" placeholder="Apartment, studio, or floor">
                    </div>
                    <div class="col-12">
                        <label for="inputAddress" class="form-label">Address</label>
                        <input disabled type="text" class="form-control" value="{{address.address}}" id="inputAddress" placeholder="1234 Main St">
                    </div>
                </div>
                <div class="row">
                    <div class="col-auto">
                        <label for="inputCity" class="form-label">City</label>
                        <input disabled type="text" class="form-control" value="{{address.city}}" id="inputCity">
                    </div>
                    <div class="col-auto">
                        <label for="inputZip" class="form-label">Postal Code</label>
                        <input disabled type="text" class="form-control" value="{{address.postal_code}}" id="inputZip">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-5">
        <div class="main">3. ORDER DETAILS </div>
        <div class="details pb-5 text-center">
            {% for item in cart %}
                <div class="row text-start mt-2">
                    <div class="col-2">
                        <img src="{{item.product.images.all.0}}" class="img-fluid" alt="">
                    </div>
                    <div class="col-4 offset-1">
                        <div class="ans"><p class="fs-2">{{ item.product.name }}</p></div>
                        <div><p class="fs-5">Qty-{{ item.quantity }} X Rs. {{item.price}}</p> </div>
                        <div class="ans"><p class="fs-5">Price-{{ item.total_price }}</p></div>
                    </div>
                    <div class="col-4">
                        <div> <p class="fw-bold">Delivery by Sun Jul  12</p> </div>
                    </div>
                </div>
            {% endfor %}
            <form id="order-form" action="{% url 'order_create' %}" method="POST">
                {% csrf_token %}
                <input type="hidden" name="addrId" value={{address.id}}>
                <button type="submit" data-addrId={{address.id}} id="order-btn" class="continue mt-2">Continue</button>
            </form>
        </div>
    </div>
    <div class="container mt-5 mb-5">
        <div class="main">4. PAYMENT DETAILS </div>
    </div>
{% endblock body%}
{% block js %}
<script> let createOrderUrl = "{% url 'order_create' %}"  </script>
<script src="{% static 'payment/js/details.js' %}"></script>
{% comment %} <script src="https://checkout.razorpay.com/v1/checkout.js"></script> {% endcomment %}
{% comment %} <script src="{% static 'payment/js/razorpay.js' %}"></script> {% endcomment %}
{% endblock js %}